{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\vovav\\\\Documents\\\\Content\\\\Share\\\\frontend\\\\src\\\\components\\\\ProjectForm.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport ImageUpload from './ImageUpload';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ProjectForm = ({\n  project = null,\n  onSubmit,\n  onCancel,\n  loading = false\n}) => {\n  _s();\n  const [formData, setFormData] = useState({\n    title: '',\n    short_description: '',\n    full_description: '',\n    area: '',\n    location: ''\n  });\n  const [mainPhoto, setMainPhoto] = useState(null);\n  const [galleryPhotos, setGalleryPhotos] = useState([]);\n  const [errors, setErrors] = useState({});\n  const isEditing = !!project;\n  useEffect(() => {\n    if (project) {\n      setFormData({\n        title: project.title || '',\n        short_description: project.short_description || '',\n        full_description: project.full_description || '',\n        area: project.area || '',\n        location: project.location || ''\n      });\n      if (project.main_photo) {\n        setMainPhoto(project.main_photo);\n      }\n      if (project.gallery_photos) {\n        // Split by comma and filter out empty strings, then map to objects with type indicator\n        const existingPhotos = project.gallery_photos.split(',').filter(p => p.trim()).map(photo => ({\n          filename: photo.trim(),\n          isExisting: true,\n          url: photo.trim().startsWith('http') ? photo.trim() : `http://localhost:8000/uploads/${photo.trim()}`\n        }));\n        setGalleryPhotos(existingPhotos);\n      } else {\n        setGalleryPhotos([]);\n      }\n    }\n  }, [project]);\n  const handleInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n\n    // Clear error when user starts typing\n    if (errors[name]) {\n      setErrors(prev => ({\n        ...prev,\n        [name]: ''\n      }));\n    }\n  };\n  const validateForm = () => {\n    const newErrors = {};\n    if (!formData.title.trim()) {\n      newErrors.title = 'Название проекта обязательно';\n    }\n    if (!formData.short_description.trim()) {\n      newErrors.short_description = 'Краткое описание обязательно';\n    }\n    if (!formData.full_description.trim()) {\n      newErrors.full_description = 'Полное описание обязательно';\n    }\n    if (!mainPhoto && !isEditing) {\n      newErrors.mainPhoto = 'Главное фото обязательно';\n    }\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!validateForm()) {\n      return;\n    }\n    const submitData = new FormData();\n\n    // Add form fields\n    Object.keys(formData).forEach(key => {\n      if (formData[key]) {\n        submitData.append(key, formData[key]);\n      }\n    });\n\n    // Add main photo\n    if (mainPhoto && typeof mainPhoto === 'object') {\n      submitData.append('main_photo', mainPhoto);\n    }\n\n    // Handle gallery photos for editing vs creating\n    if (isEditing) {\n      // When editing, we need to handle existing vs new photos carefully\n      const newPhotos = galleryPhotos.filter(photo => photo instanceof File);\n      const existingPhotos = galleryPhotos.filter(photo => typeof photo === 'string' || typeof photo === 'object' && photo.isExisting);\n      console.log('🔄 Processing gallery photos for editing:');\n      console.log('   New photos (File objects):', newPhotos.length);\n      console.log('   Existing photos:', existingPhotos.length);\n      if (newPhotos.length > 0) {\n        // If there are new photos, send them as separate entries\n        // Each file should be added with the same name 'gallery_photos'\n        newPhotos.forEach((photo, index) => {\n          console.log(`   Adding photo ${index + 1}: ${photo.name}, size: ${photo.size}`);\n          submitData.append('gallery_photos', photo);\n        });\n        console.log('   Added new photos to FormData');\n\n        // Debug: Log FormData contents\n        console.log('   FormData contents after adding gallery photos:');\n        for (let [key, value] of submitData.entries()) {\n          if (value instanceof File) {\n            console.log(`     ${key}: File(${value.name}, ${value.size} bytes, ${value.type})`);\n          } else {\n            console.log(`     ${key}: ${value}`);\n          }\n        }\n      } else if (galleryPhotos.length === 0) {\n        // If gallery is completely empty, send a separate field to indicate clearing\n        submitData.append('clear_gallery', 'true');\n        console.log('   Added clear_gallery flag to FormData');\n      } else if (existingPhotos.length > 0 && newPhotos.length === 0) {\n        // If there are only existing photos and no new ones, don't send gallery_photos field\n        // This will keep the existing gallery unchanged\n        console.log('   Keeping existing gallery unchanged');\n      }\n    } else {\n      // When creating new project, send all gallery photos\n      const newPhotos = galleryPhotos.filter(photo => photo instanceof File);\n      if (newPhotos.length > 0) {\n        // Send each photo as a separate entry with the same name\n        newPhotos.forEach((photo, index) => {\n          console.log(`   Adding photo ${index + 1}: ${photo.name}, size: ${photo.size}`);\n          submitData.append('gallery_photos', photo);\n        });\n        console.log('   Added gallery photos to FormData for new project');\n\n        // Debug: Log FormData contents\n        console.log('   FormData contents after adding gallery photos:');\n        for (let [key, value] of submitData.entries()) {\n          if (value instanceof File) {\n            console.log(`     ${key}: File(${value.name}, ${value.size} bytes, ${value.type})`);\n          } else {\n            console.log(`     ${key}: ${value}`);\n          }\n        }\n      }\n    }\n\n    // Debug logging\n    console.log('🔄 Submitting form data:');\n    console.log('   Form data:', formData);\n    console.log('   Main photo:', mainPhoto);\n    console.log('   Gallery photos:', galleryPhotos);\n    console.log('   Is editing:', isEditing);\n\n    // Log FormData contents\n    for (let [key, value] of submitData.entries()) {\n      if (value instanceof File) {\n        console.log(`   ${key}: File(${value.name}, ${value.size} bytes, ${value.type})`);\n      } else {\n        console.log(`   ${key}: ${value}`);\n      }\n    }\n    onSubmit(submitData);\n  };\n  const handleMainPhotoChange = photo => {\n    setMainPhoto(photo);\n    if (errors.mainPhoto) {\n      setErrors(prev => ({\n        ...prev,\n        mainPhoto: ''\n      }));\n    }\n  };\n  const handleGalleryPhotosChange = photos => {\n    setGalleryPhotos(photos || []);\n  };\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    className: \"space-y-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"title\",\n        className: \"block text-sm font-medium text-gray-700\",\n        children: \"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u043F\\u0440\\u043E\\u0435\\u043A\\u0442\\u0430 *\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"title\",\n        name: \"title\",\n        value: formData.title,\n        onChange: handleInputChange,\n        className: `mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm ${errors.title ? 'border-red-300' : 'border-gray-300'}`,\n        placeholder: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u043F\\u0440\\u043E\\u0435\\u043A\\u0442\\u0430\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 9\n      }, this), errors.title && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"mt-1 text-sm text-red-600\",\n        children: errors.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"short_description\",\n        className: \"block text-sm font-medium text-gray-700\",\n        children: \"\\u041A\\u0440\\u0430\\u0442\\u043A\\u043E\\u0435 \\u043E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435 *\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        id: \"short_description\",\n        name: \"short_description\",\n        rows: 3,\n        value: formData.short_description,\n        onChange: handleInputChange,\n        className: `mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm ${errors.short_description ? 'border-red-300' : 'border-gray-300'}`,\n        placeholder: \"\\u041A\\u0440\\u0430\\u0442\\u043A\\u043E\\u0435 \\u043E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435 \\u0434\\u043B\\u044F \\u043A\\u0430\\u0440\\u0442\\u043E\\u0447\\u043A\\u0438 \\u043F\\u0440\\u043E\\u0435\\u043A\\u0442\\u0430\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 9\n      }, this), errors.short_description && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"mt-1 text-sm text-red-600\",\n        children: errors.short_description\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"full_description\",\n        className: \"block text-sm font-medium text-gray-700\",\n        children: \"\\u041F\\u043E\\u043B\\u043D\\u043E\\u0435 \\u043E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435 *\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        id: \"full_description\",\n        name: \"full_description\",\n        rows: 6,\n        value: formData.full_description,\n        onChange: handleInputChange,\n        className: `mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm ${errors.full_description ? 'border-red-300' : 'border-gray-300'}`,\n        placeholder: \"\\u041F\\u043E\\u0434\\u0440\\u043E\\u0431\\u043D\\u043E\\u0435 \\u043E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435 \\u043F\\u0440\\u043E\\u0435\\u043A\\u0442\\u0430\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 9\n      }, this), errors.full_description && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"mt-1 text-sm text-red-600\",\n        children: errors.full_description\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"area\",\n          className: \"block text-sm font-medium text-gray-700\",\n          children: \"\\u041F\\u043B\\u043E\\u0449\\u0430\\u0434\\u044C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          id: \"area\",\n          name: \"area\",\n          value: formData.area,\n          onChange: handleInputChange,\n          className: \"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\",\n          placeholder: \"\\u041D\\u0430\\u043F\\u0440\\u0438\\u043C\\u0435\\u0440: 150 \\u043C\\xB2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"location\",\n          className: \"block text-sm font-medium text-gray-700\",\n          children: \"\\u041C\\u0435\\u0441\\u0442\\u043E\\u043F\\u043E\\u043B\\u043E\\u0436\\u0435\\u043D\\u0438\\u0435\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          id: \"location\",\n          name: \"location\",\n          value: formData.location,\n          onChange: handleInputChange,\n          className: \"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\",\n          placeholder: \"\\u041D\\u0430\\u043F\\u0440\\u0438\\u043C\\u0435\\u0440: \\u041C\\u043E\\u0441\\u043A\\u0432\\u0430, \\u0443\\u043B. \\u041F\\u0440\\u0438\\u043C\\u0435\\u0440\\u043D\\u0430\\u044F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(ImageUpload, {\n        label: \"\\u0413\\u043B\\u0430\\u0432\\u043D\\u043E\\u0435 \\u0444\\u043E\\u0442\\u043E *\",\n        required: !isEditing,\n        onImagesChange: handleMainPhotoChange,\n        currentImages: mainPhoto ? [mainPhoto] : [],\n        maxFiles: 1\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 301,\n        columnNumber: 9\n      }, this), errors.mainPhoto && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"mt-1 text-sm text-red-600\",\n        children: errors.mainPhoto\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"block text-sm font-medium text-gray-700\",\n        children: \"\\u0424\\u043E\\u0442\\u043E\\u0433\\u0440\\u0430\\u0444\\u0438\\u0438 \\u0433\\u0430\\u043B\\u0435\\u0440\\u0435\\u0438\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-1\",\n        children: /*#__PURE__*/_jsxDEV(ImageUpload, {\n          label: \"\",\n          multiple: true,\n          onImagesChange: handleGalleryPhotosChange,\n          currentImages: galleryPhotos,\n          maxFiles: 50 // Увеличиваем лимит\n          ,\n          maxSize: 10\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 319,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"mt-1 text-sm text-gray-500\",\n        children: \"\\u0412\\u044B \\u043C\\u043E\\u0436\\u0435\\u0442\\u0435 \\u0432\\u044B\\u0431\\u0440\\u0430\\u0442\\u044C \\u043D\\u0435\\u0441\\u043A\\u043E\\u043B\\u044C\\u043A\\u043E \\u0444\\u043E\\u0442\\u043E\\u0433\\u0440\\u0430\\u0444\\u0438\\u0439 \\u043E\\u0434\\u043D\\u043E\\u0432\\u0440\\u0435\\u043C\\u0435\\u043D\\u043D\\u043E. \\u041F\\u043E\\u0434\\u0434\\u0435\\u0440\\u0436\\u0438\\u0432\\u0430\\u044E\\u0442\\u0441\\u044F \\u0444\\u043E\\u0440\\u043C\\u0430\\u0442\\u044B: PNG, JPG, GIF \\u0434\\u043E 10MB \\u043A\\u0430\\u0436\\u0434\\u0430\\u044F.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 9\n      }, this), galleryPhotos.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-2 p-2 bg-blue-50 rounded-md\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-blue-700\",\n          children: [\"\\uD83D\\uDCF8 \\u0412\\u044B\\u0431\\u0440\\u0430\\u043D\\u043E \\u0444\\u043E\\u0442\\u043E\\u0433\\u0440\\u0430\\u0444\\u0438\\u0439: \", galleryPhotos.filter(p => p instanceof File).length, \" \\u043D\\u043E\\u0432\\u044B\\u0445 + \", galleryPhotos.filter(p => !(p instanceof File)).length, \" \\u0441\\u0443\\u0449\\u0435\\u0441\\u0442\\u0432\\u0443\\u044E\\u0449\\u0438\\u0445\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-end space-x-3 pt-6 border-t border-gray-200\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: onCancel,\n        className: \"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\",\n        children: \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        disabled: loading,\n        className: \"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed\",\n        children: loading ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"animate-spin -ml-1 mr-2 h-4 w-4 text-white\",\n            xmlns: \"http://www.w3.org/2000/svg\",\n            fill: \"none\",\n            viewBox: \"0 0 24 24\",\n            children: [/*#__PURE__*/_jsxDEV(\"circle\", {\n              className: \"opacity-25\",\n              cx: \"12\",\n              cy: \"12\",\n              r: \"10\",\n              stroke: \"currentColor\",\n              strokeWidth: \"4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 359,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n              className: \"opacity-75\",\n              fill: \"currentColor\",\n              d: \"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 360,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 358,\n            columnNumber: 15\n          }, this), \"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0435\\u043D\\u0438\\u0435...\"]\n        }, void 0, true) : isEditing ? 'Обновить проект' : 'Создать проект'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 351,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 342,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 202,\n    columnNumber: 5\n  }, this);\n};\n_s(ProjectForm, \"K3qx2aYjgNFnm2KVpVpmZMvomTM=\");\n_c = ProjectForm;\nexport default ProjectForm;\nvar _c;\n$RefreshReg$(_c, \"ProjectForm\");","map":{"version":3,"names":["React","useState","useEffect","ImageUpload","jsxDEV","_jsxDEV","Fragment","_Fragment","ProjectForm","project","onSubmit","onCancel","loading","_s","formData","setFormData","title","short_description","full_description","area","location","mainPhoto","setMainPhoto","galleryPhotos","setGalleryPhotos","errors","setErrors","isEditing","main_photo","gallery_photos","existingPhotos","split","filter","p","trim","map","photo","filename","isExisting","url","startsWith","handleInputChange","e","name","value","target","prev","validateForm","newErrors","Object","keys","length","handleSubmit","preventDefault","submitData","FormData","forEach","key","append","newPhotos","File","console","log","index","size","entries","type","handleMainPhotoChange","handleGalleryPhotosChange","photos","className","children","htmlFor","fileName","_jsxFileName","lineNumber","columnNumber","id","onChange","placeholder","rows","label","required","onImagesChange","currentImages","maxFiles","multiple","maxSize","onClick","disabled","xmlns","fill","viewBox","cx","cy","r","stroke","strokeWidth","d","_c","$RefreshReg$"],"sources":["C:/Users/vovav/Documents/Content/Share/frontend/src/components/ProjectForm.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport ImageUpload from './ImageUpload';\n\nconst ProjectForm = ({ project = null, onSubmit, onCancel, loading = false }) => {\n  const [formData, setFormData] = useState({\n    title: '',\n    short_description: '',\n    full_description: '',\n    area: '',\n    location: ''\n  });\n  \n  const [mainPhoto, setMainPhoto] = useState(null);\n  const [galleryPhotos, setGalleryPhotos] = useState([]);\n  const [errors, setErrors] = useState({});\n\n  const isEditing = !!project;\n\n  useEffect(() => {\n    if (project) {\n      setFormData({\n        title: project.title || '',\n        short_description: project.short_description || '',\n        full_description: project.full_description || '',\n        area: project.area || '',\n        location: project.location || ''\n      });\n      \n      if (project.main_photo) {\n        setMainPhoto(project.main_photo);\n      }\n      \n      if (project.gallery_photos) {\n        // Split by comma and filter out empty strings, then map to objects with type indicator\n        const existingPhotos = project.gallery_photos.split(',')\n          .filter(p => p.trim())\n          .map(photo => ({ \n            filename: photo.trim(), \n            isExisting: true,\n            url: photo.trim().startsWith('http') ? photo.trim() : `http://localhost:8000/uploads/${photo.trim()}`\n          }));\n        setGalleryPhotos(existingPhotos);\n      } else {\n        setGalleryPhotos([]);\n      }\n    }\n  }, [project]);\n\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n    \n    // Clear error when user starts typing\n    if (errors[name]) {\n      setErrors(prev => ({\n        ...prev,\n        [name]: ''\n      }));\n    }\n  };\n\n  const validateForm = () => {\n    const newErrors = {};\n    \n    if (!formData.title.trim()) {\n      newErrors.title = 'Название проекта обязательно';\n    }\n    \n    if (!formData.short_description.trim()) {\n      newErrors.short_description = 'Краткое описание обязательно';\n    }\n    \n    if (!formData.full_description.trim()) {\n      newErrors.full_description = 'Полное описание обязательно';\n    }\n    \n    if (!mainPhoto && !isEditing) {\n      newErrors.mainPhoto = 'Главное фото обязательно';\n    }\n    \n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    \n    if (!validateForm()) {\n      return;\n    }\n\n    const submitData = new FormData();\n    \n    // Add form fields\n    Object.keys(formData).forEach(key => {\n      if (formData[key]) {\n        submitData.append(key, formData[key]);\n      }\n    });\n    \n    // Add main photo\n    if (mainPhoto && typeof mainPhoto === 'object') {\n      submitData.append('main_photo', mainPhoto);\n    }\n    \n    // Handle gallery photos for editing vs creating\n    if (isEditing) {\n      // When editing, we need to handle existing vs new photos carefully\n      const newPhotos = galleryPhotos.filter(photo => photo instanceof File);\n      const existingPhotos = galleryPhotos.filter(photo => \n        typeof photo === 'string' || (typeof photo === 'object' && photo.isExisting)\n      );\n      \n      console.log('🔄 Processing gallery photos for editing:');\n      console.log('   New photos (File objects):', newPhotos.length);\n      console.log('   Existing photos:', existingPhotos.length);\n      \n      if (newPhotos.length > 0) {\n        // If there are new photos, send them as separate entries\n        // Each file should be added with the same name 'gallery_photos'\n        newPhotos.forEach((photo, index) => {\n          console.log(`   Adding photo ${index + 1}: ${photo.name}, size: ${photo.size}`);\n          submitData.append('gallery_photos', photo);\n        });\n        console.log('   Added new photos to FormData');\n        \n        // Debug: Log FormData contents\n        console.log('   FormData contents after adding gallery photos:');\n        for (let [key, value] of submitData.entries()) {\n          if (value instanceof File) {\n            console.log(`     ${key}: File(${value.name}, ${value.size} bytes, ${value.type})`);\n          } else {\n            console.log(`     ${key}: ${value}`);\n          }\n        }\n      } else if (galleryPhotos.length === 0) {\n        // If gallery is completely empty, send a separate field to indicate clearing\n        submitData.append('clear_gallery', 'true');\n        console.log('   Added clear_gallery flag to FormData');\n      } else if (existingPhotos.length > 0 && newPhotos.length === 0) {\n        // If there are only existing photos and no new ones, don't send gallery_photos field\n        // This will keep the existing gallery unchanged\n        console.log('   Keeping existing gallery unchanged');\n      }\n    } else {\n      // When creating new project, send all gallery photos\n      const newPhotos = galleryPhotos.filter(photo => photo instanceof File);\n      if (newPhotos.length > 0) {\n        // Send each photo as a separate entry with the same name\n        newPhotos.forEach((photo, index) => {\n          console.log(`   Adding photo ${index + 1}: ${photo.name}, size: ${photo.size}`);\n          submitData.append('gallery_photos', photo);\n        });\n        console.log('   Added gallery photos to FormData for new project');\n        \n        // Debug: Log FormData contents\n        console.log('   FormData contents after adding gallery photos:');\n        for (let [key, value] of submitData.entries()) {\n          if (value instanceof File) {\n            console.log(`     ${key}: File(${value.name}, ${value.size} bytes, ${value.type})`);\n          } else {\n            console.log(`     ${key}: ${value}`);\n          }\n        }\n      }\n    }\n    \n    // Debug logging\n    console.log('🔄 Submitting form data:');\n    console.log('   Form data:', formData);\n    console.log('   Main photo:', mainPhoto);\n    console.log('   Gallery photos:', galleryPhotos);\n    console.log('   Is editing:', isEditing);\n    \n    // Log FormData contents\n    for (let [key, value] of submitData.entries()) {\n      if (value instanceof File) {\n        console.log(`   ${key}: File(${value.name}, ${value.size} bytes, ${value.type})`);\n      } else {\n        console.log(`   ${key}: ${value}`);\n      }\n    }\n    \n    onSubmit(submitData);\n  };\n\n  const handleMainPhotoChange = (photo) => {\n    setMainPhoto(photo);\n    if (errors.mainPhoto) {\n      setErrors(prev => ({ ...prev, mainPhoto: '' }));\n    }\n  };\n\n  const handleGalleryPhotosChange = (photos) => {\n    setGalleryPhotos(photos || []);\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className=\"space-y-6\">\n      {/* Title */}\n      <div>\n        <label htmlFor=\"title\" className=\"block text-sm font-medium text-gray-700\">\n          Название проекта *\n        </label>\n        <input\n          type=\"text\"\n          id=\"title\"\n          name=\"title\"\n          value={formData.title}\n          onChange={handleInputChange}\n          className={`mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm ${\n            errors.title ? 'border-red-300' : 'border-gray-300'\n          }`}\n          placeholder=\"Введите название проекта\"\n        />\n        {errors.title && (\n          <p className=\"mt-1 text-sm text-red-600\">{errors.title}</p>\n        )}\n      </div>\n\n      {/* Short Description */}\n      <div>\n        <label htmlFor=\"short_description\" className=\"block text-sm font-medium text-gray-700\">\n          Краткое описание *\n        </label>\n        <textarea\n          id=\"short_description\"\n          name=\"short_description\"\n          rows={3}\n          value={formData.short_description}\n          onChange={handleInputChange}\n          className={`mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm ${\n            errors.short_description ? 'border-red-300' : 'border-gray-300'\n          }`}\n          placeholder=\"Краткое описание для карточки проекта\"\n        />\n        {errors.short_description && (\n          <p className=\"mt-1 text-sm text-red-600\">{errors.short_description}</p>\n        )}\n      </div>\n\n      {/* Full Description */}\n      <div>\n        <label htmlFor=\"full_description\" className=\"block text-sm font-medium text-gray-700\">\n          Полное описание *\n        </label>\n        <textarea\n          id=\"full_description\"\n          name=\"full_description\"\n          rows={6}\n          value={formData.full_description}\n          onChange={handleInputChange}\n          className={`mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm ${\n            errors.full_description ? 'border-red-300' : 'border-gray-300'\n          }`}\n          placeholder=\"Подробное описание проекта\"\n        />\n        {errors.full_description && (\n          <p className=\"mt-1 text-sm text-red-600\">{errors.full_description}</p>\n        )}\n      </div>\n\n      {/* Area and Location */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n        <div>\n          <label htmlFor=\"area\" className=\"block text-sm font-medium text-gray-700\">\n            Площадь\n          </label>\n          <input\n            type=\"text\"\n            id=\"area\"\n            name=\"area\"\n            value={formData.area}\n            onChange={handleInputChange}\n            className=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\n            placeholder=\"Например: 150 м²\"\n          />\n        </div>\n        \n        <div>\n          <label htmlFor=\"location\" className=\"block text-sm font-medium text-gray-700\">\n            Местоположение\n          </label>\n          <input\n            type=\"text\"\n            id=\"location\"\n            name=\"location\"\n            value={formData.location}\n            onChange={handleInputChange}\n            className=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\n            placeholder=\"Например: Москва, ул. Примерная\"\n          />\n        </div>\n      </div>\n\n      {/* Main Photo */}\n      <div>\n        <ImageUpload\n          label=\"Главное фото *\"\n          required={!isEditing}\n          onImagesChange={handleMainPhotoChange}\n          currentImages={mainPhoto ? [mainPhoto] : []}\n          maxFiles={1}\n        />\n        {errors.mainPhoto && (\n          <p className=\"mt-1 text-sm text-red-600\">{errors.mainPhoto}</p>\n        )}\n      </div>\n\n      {/* Gallery Photos */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-700\">\n          Фотографии галереи\n        </label>\n        <div className=\"mt-1\">\n          <ImageUpload\n            label=\"\"\n            multiple={true}\n            onImagesChange={handleGalleryPhotosChange}\n            currentImages={galleryPhotos}\n            maxFiles={50} // Увеличиваем лимит\n            maxSize={10}\n          />\n        </div>\n        <p className=\"mt-1 text-sm text-gray-500\">\n          Вы можете выбрать несколько фотографий одновременно. \n          Поддерживаются форматы: PNG, JPG, GIF до 10MB каждая.\n        </p>\n        {galleryPhotos.length > 0 && (\n          <div className=\"mt-2 p-2 bg-blue-50 rounded-md\">\n            <p className=\"text-sm text-blue-700\">\n              📸 Выбрано фотографий: {galleryPhotos.filter(p => p instanceof File).length} новых + {galleryPhotos.filter(p => !(p instanceof File)).length} существующих\n            </p>\n          </div>\n        )}\n      </div>\n\n      {/* Form Actions */}\n      <div className=\"flex justify-end space-x-3 pt-6 border-t border-gray-200\">\n        <button\n          type=\"button\"\n          onClick={onCancel}\n          className=\"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\n        >\n          Отмена\n        </button>\n        \n        <button\n          type=\"submit\"\n          disabled={loading}\n          className=\"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed\"\n        >\n          {loading ? (\n            <>\n              <svg className=\"animate-spin -ml-1 mr-2 h-4 w-4 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n              </svg>\n              Сохранение...\n            </>\n          ) : (\n            isEditing ? 'Обновить проект' : 'Создать проект'\n          )}\n        </button>\n      </div>\n    </form>\n  );\n};\n\nexport default ProjectForm; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}