{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\vovav\\\\Documents\\\\Content\\\\Share\\\\frontend\\\\src\\\\components\\\\ImageUpload.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ImageUpload = ({\n  label,\n  required = false,\n  multiple = false,\n  onImagesChange,\n  currentImages = [],\n  maxFiles = 50,\n  // Увеличиваем максимальное количество файлов\n  maxSize = 10 // MB\n}) => {\n  _s();\n  const [dragActive, setDragActive] = useState(false);\n  const [previewImages, setPreviewImages] = useState(currentImages);\n  const fileInputRef = useRef(null);\n  useEffect(() => {\n    if (currentImages && currentImages.length > 0) {\n      // Handle both existing image objects and new File objects\n      const processedImages = currentImages.map(img => {\n        if (typeof img === 'string') {\n          // If it's a filename string\n          return {\n            filename: img,\n            isExisting: true,\n            url: img.startsWith('http') ? img : `http://localhost:8000/uploads/${img}`\n          };\n        } else if (img && typeof img === 'object' && img.isExisting) {\n          // If it's already processed\n          return img;\n        } else if (img instanceof File) {\n          // If it's a new File object\n          return img;\n        }\n        return img;\n      });\n      setPreviewImages(processedImages);\n      console.log('🔄 ImageUpload useEffect: Processing current images');\n      console.log('   Input images:', currentImages);\n      console.log('   Processed images:', processedImages);\n    } else {\n      setPreviewImages([]);\n      console.log('🔄 ImageUpload useEffect: No current images');\n    }\n  }, [currentImages]);\n  const handleDrag = e => {\n    e.preventDefault();\n    e.stopPropagation();\n    if (e.type === \"dragenter\" || e.type === \"dragover\") {\n      setDragActive(true);\n    } else if (e.type === \"dragleave\") {\n      setDragActive(false);\n    }\n  };\n  const handleDrop = e => {\n    e.preventDefault();\n    e.stopPropagation();\n    setDragActive(false);\n    if (e.dataTransfer.files && e.dataTransfer.files[0]) {\n      handleFiles(e.dataTransfer.files);\n    }\n  };\n  const handleFiles = files => {\n    console.log(`🔄 ImageUpload: Processing ${files.length} files`);\n    console.log('   Files received:', Array.from(files).map(f => ({\n      name: f.name,\n      size: f.size,\n      type: f.type\n    })));\n    const validFiles = Array.from(files).filter(file => {\n      // Check file type\n      if (!file.type.startsWith('image/')) {\n        console.warn(`Skipping non-image file: ${file.name} (${file.type})`);\n        return false;\n      }\n\n      // Check file size\n      if (file.size > maxSize * 1024 * 1024) {\n        console.warn(`Skipping large file: ${file.name} (${(file.size / 1024 / 1024).toFixed(2)}MB > ${maxSize}MB)`);\n        return false;\n      }\n      return true;\n    });\n    console.log(`   Valid files: ${validFiles.length}/${files.length}`);\n    console.log('   Valid files details:', validFiles.map(f => ({\n      name: f.name,\n      size: f.size,\n      type: f.type\n    })));\n    if (validFiles.length === 0) {\n      console.warn('No valid files to process');\n      return;\n    }\n\n    // Limit number of files only if we're close to the limit\n    if (multiple && previewImages.length + validFiles.length > maxFiles) {\n      const canAdd = maxFiles - previewImages.length;\n      if (canAdd > 0) {\n        // Add as many as we can\n        const filesToAdd = validFiles.slice(0, canAdd);\n        console.log(`   Adding ${filesToAdd.length} files (limited by maxFiles: ${maxFiles})`);\n        validFiles.splice(0, canAdd);\n        const newImages = [...previewImages, ...filesToAdd];\n        setPreviewImages(newImages);\n\n        // Convert back to the format expected by parent component\n        const existingImages = previewImages.filter(img => typeof img === 'string' || typeof img === 'object' && img.isExisting);\n        const allImages = [...existingImages, ...filesToAdd];\n        console.log('   Calling onImagesChange with limited files:', allImages.length);\n        onImagesChange(allImages);\n\n        // Show warning about remaining files\n        if (validFiles.length > 0) {\n          alert(`Добавлено ${filesToAdd.length} файлов. Максимальное количество: ${maxFiles}. Остальные файлы не добавлены.`);\n        }\n      } else {\n        alert(`Достигнуто максимальное количество файлов: ${maxFiles}`);\n      }\n      return;\n    }\n\n    // Add all valid files\n    const newImages = multiple ? [...previewImages, ...validFiles] : validFiles;\n    setPreviewImages(newImages);\n    console.log(`   Added ${validFiles.length} files to preview`);\n    console.log('   New preview images count:', newImages.length);\n\n    // Convert back to the format expected by parent component\n    if (multiple) {\n      // For multiple images, we need to preserve existing images and add new files\n      const existingImages = previewImages.filter(img => typeof img === 'string' || typeof img === 'object' && img.isExisting);\n      const allImages = [...existingImages, ...validFiles];\n      console.log('🔄 ImageUpload: Processing multiple images');\n      console.log('   Existing images:', existingImages.length);\n      console.log('   New files:', validFiles.length);\n      console.log('   Total images:', allImages.length);\n      console.log('   Calling onImagesChange with:', allImages);\n      onImagesChange(allImages);\n    } else {\n      onImagesChange(validFiles[0]);\n    }\n  };\n  const handleFileInput = e => {\n    var _e$target$files;\n    console.log('🔄 ImageUpload: File input change event');\n    console.log('   Event target:', e.target);\n    console.log('   Files property:', e.target.files);\n    console.log('   Files length:', (_e$target$files = e.target.files) === null || _e$target$files === void 0 ? void 0 : _e$target$files.length);\n    if (e.target.files && e.target.files[0]) {\n      console.log('   Files found, processing...');\n      console.log('   Files array:', Array.from(e.target.files).map(f => ({\n        name: f.name,\n        size: f.size,\n        type: f.type\n      })));\n      handleFiles(e.target.files);\n    } else {\n      console.log('   No files selected or files array is empty');\n    }\n  };\n  const removeImage = index => {\n    const newImages = previewImages.filter((_, i) => i !== index);\n    setPreviewImages(newImages);\n\n    // Convert back to the format expected by parent component\n    if (multiple) {\n      // For multiple images, we need to preserve existing images and new files separately\n      const existingImages = newImages.filter(img => typeof img === 'string' || typeof img === 'object' && img.isExisting);\n      const newFiles = newImages.filter(img => img instanceof File);\n      const allImages = [...existingImages, ...newFiles];\n      console.log('🔄 ImageUpload: Removing image');\n      console.log('   Remaining existing images:', existingImages.length);\n      console.log('   Remaining new files:', newFiles.length);\n      console.log('   Total remaining images:', allImages.length);\n      onImagesChange(allImages);\n    } else {\n      onImagesChange(newImages.length > 0 ? newImages[0] : null);\n    }\n  };\n  const openFileDialog = () => {\n    console.log('🔄 ImageUpload: Opening file dialog');\n    console.log('   Multiple selection enabled:', multiple);\n    console.log('   Max files:', maxFiles);\n    console.log('   Current preview images count:', previewImages.length);\n    if (fileInputRef.current) {\n      console.log('   File input ref found, clicking...');\n      fileInputRef.current.click();\n    } else {\n      console.error('   File input ref not found!');\n    }\n  };\n  const getImagePreview = file => {\n    if (typeof file === 'string') {\n      // If it's a URL string\n      return file.startsWith('http') ? file : `http://localhost:8000/uploads/${file}`;\n    }\n    if (file && typeof file === 'object' && file.isExisting) {\n      // If it's an existing image object\n      return file.url;\n    }\n    if (file && typeof file === 'object' && file instanceof File) {\n      // If it's a File object\n      return URL.createObjectURL(file);\n    }\n    // Fallback\n    return '/placeholder-image.jpg';\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"space-y-2\",\n    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n      className: \"block text-sm font-medium text-gray-700\",\n      children: [label, required && /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"text-red-500 ml-1\",\n        children: \"*\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 22\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `relative border-2 border-dashed rounded-lg p-6 text-center transition-colors duration-200 ${dragActive ? 'border-indigo-400 bg-indigo-50' : 'border-gray-300 hover:border-gray-400'}`,\n      onDragEnter: handleDrag,\n      onDragLeave: handleDrag,\n      onDragOver: handleDrag,\n      onDrop: handleDrop,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        ref: fileInputRef,\n        type: \"file\",\n        multiple: multiple,\n        accept: \"image/*\",\n        onChange: handleFileInput,\n        className: \"hidden\",\n        \"data-testid\": \"file-input\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n          className: \"mx-auto h-12 w-12 text-gray-400\",\n          stroke: \"currentColor\",\n          fill: \"none\",\n          viewBox: \"0 0 48 48\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            d: \"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02\",\n            strokeWidth: 2,\n            strokeLinecap: \"round\",\n            strokeLinejoin: \"round\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-sm text-gray-600\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: openFileDialog,\n            className: \"font-medium text-indigo-600 hover:text-indigo-500\",\n            children: multiple ? 'Выбрать файлы' : 'Выбрать файл'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 13\n          }, this), ' ', \"\\u0438\\u043B\\u0438 \\u043F\\u0435\\u0440\\u0435\\u0442\\u0430\\u0449\\u0438\\u0442\\u0435 \\u0441\\u044E\\u0434\\u0430\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-xs text-gray-500\",\n          children: [\"PNG, JPG, GIF \\u0434\\u043E \", maxSize, \"MB\", multiple && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [\", \\u043C\\u0430\\u043A\\u0441\\u0438\\u043C\\u0443\\u043C \", maxFiles, \" \\u0444\\u0430\\u0439\\u043B\\u043E\\u0432\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 279,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-indigo-600 font-medium\",\n              children: \"\\uD83D\\uDCA1 \\u041C\\u043E\\u0436\\u043D\\u043E \\u0432\\u044B\\u0431\\u0440\\u0430\\u0442\\u044C \\u043D\\u0435\\u0441\\u043A\\u043E\\u043B\\u044C\\u043A\\u043E \\u0444\\u0430\\u0439\\u043B\\u043E\\u0432 \\u043E\\u0434\\u043D\\u043E\\u0432\\u0440\\u0435\\u043C\\u0435\\u043D\\u043D\\u043E!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 280,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 283,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-gray-500\",\n              children: \"(\\u0418\\u0441\\u043F\\u043E\\u043B\\u044C\\u0437\\u0443\\u0439\\u0442\\u0435 Ctrl+\\u043A\\u043B\\u0438\\u043A \\u0438\\u043B\\u0438 Shift+\\u043A\\u043B\\u0438\\u043A \\u0434\\u043B\\u044F \\u0432\\u044B\\u0431\\u043E\\u0440\\u0430 \\u043D\\u0435\\u0441\\u043A\\u043E\\u043B\\u044C\\u043A\\u0438\\u0445 \\u0444\\u0430\\u0439\\u043B\\u043E\\u0432)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 284,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 7\n    }, this), previewImages.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between mb-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"text-sm font-medium text-gray-700\",\n          children: [\"\\u0412\\u044B\\u0431\\u0440\\u0430\\u043D\\u043D\\u044B\\u0435 \\u0438\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u044F (\", previewImages.length, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 13\n        }, this), multiple && previewImages.length > 0 && /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: () => {\n            setPreviewImages([]);\n            onImagesChange([]);\n          },\n          className: \"text-sm text-red-600 hover:text-red-800\",\n          children: \"\\u041E\\u0447\\u0438\\u0441\\u0442\\u0438\\u0442\\u044C \\u0432\\u0441\\u0435\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-3\",\n        children: previewImages.map((image, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative group\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: getImagePreview(image),\n            alt: `Preview ${index + 1}`,\n            className: \"w-full h-20 object-cover rounded-lg border border-gray-200 hover:border-indigo-300 transition-colors\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 317,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: () => removeImage(index),\n            className: \"absolute top-1 right-1 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-200 hover:bg-red-600 text-xs\",\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 322,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute bottom-1 left-1 bg-black bg-opacity-50 text-white text-xs px-1 py-0.5 rounded\",\n            children: index + 1\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 329,\n            columnNumber: 17\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 221,\n    columnNumber: 5\n  }, this);\n};\n_s(ImageUpload, \"+OdgbuECOV75hzxY6p8eBlf536w=\");\n_c = ImageUpload;\nexport default ImageUpload;\nvar _c;\n$RefreshReg$(_c, \"ImageUpload\");","map":{"version":3,"names":["React","useState","useRef","useEffect","jsxDEV","_jsxDEV","Fragment","_Fragment","ImageUpload","label","required","multiple","onImagesChange","currentImages","maxFiles","maxSize","_s","dragActive","setDragActive","previewImages","setPreviewImages","fileInputRef","length","processedImages","map","img","filename","isExisting","url","startsWith","File","console","log","handleDrag","e","preventDefault","stopPropagation","type","handleDrop","dataTransfer","files","handleFiles","Array","from","f","name","size","validFiles","filter","file","warn","toFixed","canAdd","filesToAdd","slice","splice","newImages","existingImages","allImages","alert","handleFileInput","_e$target$files","target","removeImage","index","_","i","newFiles","openFileDialog","current","click","error","getImagePreview","URL","createObjectURL","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onDragEnter","onDragLeave","onDragOver","onDrop","ref","accept","onChange","stroke","fill","viewBox","d","strokeWidth","strokeLinecap","strokeLinejoin","onClick","image","src","alt","_c","$RefreshReg$"],"sources":["C:/Users/vovav/Documents/Content/Share/frontend/src/components/ImageUpload.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\n\r\nconst ImageUpload = ({ \r\n  label, \r\n  required = false, \r\n  multiple = false, \r\n  onImagesChange, \r\n  currentImages = [], \r\n  maxFiles = 50, // Увеличиваем максимальное количество файлов\r\n  maxSize = 10 // MB\r\n}) => {\r\n  const [dragActive, setDragActive] = useState(false);\r\n  const [previewImages, setPreviewImages] = useState(currentImages);\r\n  const fileInputRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (currentImages && currentImages.length > 0) {\r\n      // Handle both existing image objects and new File objects\r\n      const processedImages = currentImages.map(img => {\r\n        if (typeof img === 'string') {\r\n          // If it's a filename string\r\n          return {\r\n            filename: img,\r\n            isExisting: true,\r\n            url: img.startsWith('http') ? img : `http://localhost:8000/uploads/${img}`\r\n          };\r\n        } else if (img && typeof img === 'object' && img.isExisting) {\r\n          // If it's already processed\r\n          return img;\r\n        } else if (img instanceof File) {\r\n          // If it's a new File object\r\n          return img;\r\n        }\r\n        return img;\r\n      });\r\n      setPreviewImages(processedImages);\r\n      \r\n      console.log('🔄 ImageUpload useEffect: Processing current images');\r\n      console.log('   Input images:', currentImages);\r\n      console.log('   Processed images:', processedImages);\r\n    } else {\r\n      setPreviewImages([]);\r\n      console.log('🔄 ImageUpload useEffect: No current images');\r\n    }\r\n  }, [currentImages]);\r\n\r\n  const handleDrag = (e) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    if (e.type === \"dragenter\" || e.type === \"dragover\") {\r\n      setDragActive(true);\r\n    } else if (e.type === \"dragleave\") {\r\n      setDragActive(false);\r\n    }\r\n  };\r\n\r\n  const handleDrop = (e) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    setDragActive(false);\r\n    \r\n    if (e.dataTransfer.files && e.dataTransfer.files[0]) {\r\n      handleFiles(e.dataTransfer.files);\r\n    }\r\n  };\r\n\r\n  const handleFiles = (files) => {\r\n    console.log(`🔄 ImageUpload: Processing ${files.length} files`);\r\n    console.log('   Files received:', Array.from(files).map(f => ({ name: f.name, size: f.size, type: f.type })));\r\n    \r\n    const validFiles = Array.from(files).filter(file => {\r\n      // Check file type\r\n      if (!file.type.startsWith('image/')) {\r\n        console.warn(`Skipping non-image file: ${file.name} (${file.type})`);\r\n        return false;\r\n      }\r\n      \r\n      // Check file size\r\n      if (file.size > maxSize * 1024 * 1024) {\r\n        console.warn(`Skipping large file: ${file.name} (${(file.size / 1024 / 1024).toFixed(2)}MB > ${maxSize}MB)`);\r\n        return false;\r\n      }\r\n      \r\n      return true;\r\n    });\r\n\r\n    console.log(`   Valid files: ${validFiles.length}/${files.length}`);\r\n    console.log('   Valid files details:', validFiles.map(f => ({ name: f.name, size: f.size, type: f.type })));\r\n\r\n    if (validFiles.length === 0) {\r\n      console.warn('No valid files to process');\r\n      return;\r\n    }\r\n\r\n    // Limit number of files only if we're close to the limit\r\n    if (multiple && previewImages.length + validFiles.length > maxFiles) {\r\n      const canAdd = maxFiles - previewImages.length;\r\n      if (canAdd > 0) {\r\n        // Add as many as we can\r\n        const filesToAdd = validFiles.slice(0, canAdd);\r\n        console.log(`   Adding ${filesToAdd.length} files (limited by maxFiles: ${maxFiles})`);\r\n        validFiles.splice(0, canAdd);\r\n        \r\n        const newImages = [...previewImages, ...filesToAdd];\r\n        setPreviewImages(newImages);\r\n        \r\n        // Convert back to the format expected by parent component\r\n        const existingImages = previewImages.filter(img => \r\n          typeof img === 'string' || (typeof img === 'object' && img.isExisting)\r\n        );\r\n        const allImages = [...existingImages, ...filesToAdd];\r\n        console.log('   Calling onImagesChange with limited files:', allImages.length);\r\n        onImagesChange(allImages);\r\n        \r\n        // Show warning about remaining files\r\n        if (validFiles.length > 0) {\r\n          alert(`Добавлено ${filesToAdd.length} файлов. Максимальное количество: ${maxFiles}. Остальные файлы не добавлены.`);\r\n        }\r\n      } else {\r\n        alert(`Достигнуто максимальное количество файлов: ${maxFiles}`);\r\n      }\r\n      return;\r\n    }\r\n\r\n    // Add all valid files\r\n    const newImages = multiple ? [...previewImages, ...validFiles] : validFiles;\r\n    setPreviewImages(newImages);\r\n    \r\n    console.log(`   Added ${validFiles.length} files to preview`);\r\n    console.log('   New preview images count:', newImages.length);\r\n    \r\n    // Convert back to the format expected by parent component\r\n    if (multiple) {\r\n      // For multiple images, we need to preserve existing images and add new files\r\n      const existingImages = previewImages.filter(img => \r\n        typeof img === 'string' || (typeof img === 'object' && img.isExisting)\r\n      );\r\n      const allImages = [...existingImages, ...validFiles];\r\n      console.log('🔄 ImageUpload: Processing multiple images');\r\n      console.log('   Existing images:', existingImages.length);\r\n      console.log('   New files:', validFiles.length);\r\n      console.log('   Total images:', allImages.length);\r\n      console.log('   Calling onImagesChange with:', allImages);\r\n      onImagesChange(allImages);\r\n    } else {\r\n      onImagesChange(validFiles[0]);\r\n    }\r\n  };\r\n\r\n  const handleFileInput = (e) => {\r\n    console.log('🔄 ImageUpload: File input change event');\r\n    console.log('   Event target:', e.target);\r\n    console.log('   Files property:', e.target.files);\r\n    console.log('   Files length:', e.target.files?.length);\r\n    \r\n    if (e.target.files && e.target.files[0]) {\r\n      console.log('   Files found, processing...');\r\n      console.log('   Files array:', Array.from(e.target.files).map(f => ({ name: f.name, size: f.size, type: f.type })));\r\n      handleFiles(e.target.files);\r\n    } else {\r\n      console.log('   No files selected or files array is empty');\r\n    }\r\n  };\r\n\r\n  const removeImage = (index) => {\r\n    const newImages = previewImages.filter((_, i) => i !== index);\r\n    setPreviewImages(newImages);\r\n    \r\n    // Convert back to the format expected by parent component\r\n    if (multiple) {\r\n      // For multiple images, we need to preserve existing images and new files separately\r\n      const existingImages = newImages.filter(img => \r\n        typeof img === 'string' || (typeof img === 'object' && img.isExisting)\r\n      );\r\n      const newFiles = newImages.filter(img => img instanceof File);\r\n      const allImages = [...existingImages, ...newFiles];\r\n      \r\n      console.log('🔄 ImageUpload: Removing image');\r\n      console.log('   Remaining existing images:', existingImages.length);\r\n      console.log('   Remaining new files:', newFiles.length);\r\n      console.log('   Total remaining images:', allImages.length);\r\n      \r\n      onImagesChange(allImages);\r\n    } else {\r\n      onImagesChange(newImages.length > 0 ? newImages[0] : null);\r\n    }\r\n  };\r\n\r\n  const openFileDialog = () => {\r\n    console.log('🔄 ImageUpload: Opening file dialog');\r\n    console.log('   Multiple selection enabled:', multiple);\r\n    console.log('   Max files:', maxFiles);\r\n    console.log('   Current preview images count:', previewImages.length);\r\n    \r\n    if (fileInputRef.current) {\r\n      console.log('   File input ref found, clicking...');\r\n      fileInputRef.current.click();\r\n    } else {\r\n      console.error('   File input ref not found!');\r\n    }\r\n  };\r\n\r\n  const getImagePreview = (file) => {\r\n    if (typeof file === 'string') {\r\n      // If it's a URL string\r\n      return file.startsWith('http') ? file : `http://localhost:8000/uploads/${file}`;\r\n    }\r\n    if (file && typeof file === 'object' && file.isExisting) {\r\n      // If it's an existing image object\r\n      return file.url;\r\n    }\r\n    if (file && typeof file === 'object' && file instanceof File) {\r\n      // If it's a File object\r\n      return URL.createObjectURL(file);\r\n    }\r\n    // Fallback\r\n    return '/placeholder-image.jpg';\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-2\">\r\n      <label className=\"block text-sm font-medium text-gray-700\">\r\n        {label}\r\n        {required && <span className=\"text-red-500 ml-1\">*</span>}\r\n      </label>\r\n      \r\n      <div\r\n        className={`relative border-2 border-dashed rounded-lg p-6 text-center transition-colors duration-200 ${\r\n          dragActive \r\n            ? 'border-indigo-400 bg-indigo-50' \r\n            : 'border-gray-300 hover:border-gray-400'\r\n        }`}\r\n        onDragEnter={handleDrag}\r\n        onDragLeave={handleDrag}\r\n        onDragOver={handleDrag}\r\n        onDrop={handleDrop}\r\n      >\r\n        <input\r\n          ref={fileInputRef}\r\n          type=\"file\"\r\n          multiple={multiple}\r\n          accept=\"image/*\"\r\n          onChange={handleFileInput}\r\n          className=\"hidden\"\r\n          data-testid=\"file-input\"\r\n        />\r\n        \r\n        <div className=\"space-y-2\">\r\n          <svg\r\n            className=\"mx-auto h-12 w-12 text-gray-400\"\r\n            stroke=\"currentColor\"\r\n            fill=\"none\"\r\n            viewBox=\"0 0 48 48\"\r\n          >\r\n            <path\r\n              d=\"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02\"\r\n              strokeWidth={2}\r\n              strokeLinecap=\"round\"\r\n              strokeLinejoin=\"round\"\r\n            />\r\n          </svg>\r\n          \r\n          <div className=\"text-sm text-gray-600\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={openFileDialog}\r\n              className=\"font-medium text-indigo-600 hover:text-indigo-500\"\r\n            >\r\n              {multiple ? 'Выбрать файлы' : 'Выбрать файл'}\r\n            </button>\r\n            {' '}или перетащите сюда\r\n          </div>\r\n          \r\n          <p className=\"text-xs text-gray-500\">\r\n            PNG, JPG, GIF до {maxSize}MB\r\n            {multiple && (\r\n              <>\r\n                , максимум {maxFiles} файлов\r\n                <br />\r\n                <span className=\"text-indigo-600 font-medium\">\r\n                  💡 Можно выбрать несколько файлов одновременно!\r\n                </span>\r\n                <br />\r\n                <span className=\"text-gray-500\">\r\n                  (Используйте Ctrl+клик или Shift+клик для выбора нескольких файлов)\r\n                </span>\r\n              </>\r\n            )}\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Image Previews */}\r\n      {previewImages.length > 0 && (\r\n        <div className=\"mt-4\">\r\n          <div className=\"flex items-center justify-between mb-2\">\r\n            <h4 className=\"text-sm font-medium text-gray-700\">\r\n              Выбранные изображения ({previewImages.length})\r\n            </h4>\r\n            {multiple && previewImages.length > 0 && (\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => {\r\n                  setPreviewImages([]);\r\n                  onImagesChange([]);\r\n                }}\r\n                className=\"text-sm text-red-600 hover:text-red-800\"\r\n              >\r\n                Очистить все\r\n              </button>\r\n            )}\r\n          </div>\r\n          \r\n          <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-3\">\r\n            {previewImages.map((image, index) => (\r\n              <div key={index} className=\"relative group\">\r\n                <img\r\n                  src={getImagePreview(image)}\r\n                  alt={`Preview ${index + 1}`}\r\n                  className=\"w-full h-20 object-cover rounded-lg border border-gray-200 hover:border-indigo-300 transition-colors\"\r\n                />\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => removeImage(index)}\r\n                  className=\"absolute top-1 right-1 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-200 hover:bg-red-600 text-xs\"\r\n                >\r\n                  ×\r\n                </button>\r\n                <div className=\"absolute bottom-1 left-1 bg-black bg-opacity-50 text-white text-xs px-1 py-0.5 rounded\">\r\n                  {index + 1}\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ImageUpload; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}